<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡œå±±å››å¤©ä¸‰å¤œæ—…éŠæ‰‹å†Š</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Zen Maru Gothic (Rounded Font) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config for Morandi Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'rounded': ['"Zen Maru Gothic"', 'sans-serif'],
                    },
                    colors: {
                        morandi: {
                            base: '#F5F5F0',       // Creamy White background
                            dark: '#5E6C75',       // Dark Blue Grey (Text)
                            blue: '#8CA6A8',       // Muted Blue
                            green: '#A6B5A3',      // Sage Green
                            pink: '#DBC4BF',       // Dusty Pink
                            brown: '#C4B2A7',      // Muted Brown
                            accent: '#E6D7D2',     // Light Accent
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        body {
            background-color: #F5F5F0;
            color: #5E6C75;
        }
        /* Hide scrollbar for clean look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #F5F5F0; 
        }
        ::-webkit-scrollbar-thumb {
            background: #C4B2A7; 
            border-radius: 10px;
        }
        .tab-active {
            border-bottom: 3px solid #8CA6A8;
            color: #5E6C75;
            font-weight: bold;
        }
        .tab-inactive {
            color: #A0A0A0;
        }
        /* Style for dragged item placeholder */
        .drag-over {
            border-top: 2px solid #8CA6A8;
            opacity: 0.5;
        }
    </style>
</head>
<body class="font-rounded h-screen overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons (SVG Components) ---
        const IconCheck = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>;
        const IconMap = () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>;
        const IconDrag = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 17 20 12 15 7"></polyline><polyline points="9 17 4 12 9 7"></polyline></svg>;
        const IconTrash = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
        const IconPlus = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>;
        const IconPlane = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 2L2 22"></path><path d="M11 13L22 2"></path><path d="M22 2l-7 20-4-9-9-4 20-7z"></path></svg>;

        // --- Data Definitions ---
        const initialChecklist = {
            "äº¤é€šä½å®¿+è¡Œå‰ç”³è«‹": [
                { id: 1, text: "é›»å­ç°½è­‰ / æ©Ÿä¸Šé ˜å…¥å¢ƒå¡", checked: false },
                { id: 2, text: "ç¶²è·¯å¡ / ESIM", checked: false },
                { id: 3, text: "å„ç¨®æ”¯ä»˜ç¶å®š (LINE PAYã€è¡—å£ç­‰)", checked: false },
                { id: 4, text: "æ—…å¹³éšª", checked: false },
                { id: 5, text: "ä½å®¿æ†‘è­‰", checked: false },
                { id: 6, text: "ä¾†å›æ©Ÿç¥¨", checked: false },
            ],
            "è¡Œæç®±": [
                { id: 7, text: "ä¿é¤Šå“", checked: false },
                { id: 8, text: "å€‹äººè—¥ç‰©", checked: false },
                { id: 9, text: "å®¶é‘°åŒ™", checked: false },
                { id: 10, text: "å……é›»ç·š", checked: false },
                { id: 11, text: "é›¨å‚˜", checked: false },
                { id: 12, text: "æ´—é¢ä¹³ã€å¸å¦", checked: false },
                { id: 13, text: "æ¢³å­ + é«®å‹é€ å‹ç”¨å“", checked: false },
                { id: 14, text: "è½‰æ¥é ­ + å»¶é•·ç·š", checked: false },
                { id: 15, text: "åŒ–å¦å“", checked: false },
                { id: 16, text: "è¡›ç”Ÿç”¨å“", checked: false },
                { id: 17, text: "ç‰™åˆ· + ç‰™è†", checked: false },
                { id: 18, text: "4å¤©3å¤œè¡£æœ", checked: false },
            ],
            "éš¨èº«åŒ…": [
                { id: 19, text: "å°å¹£", checked: false },
                { id: 20, text: "è€³æ©Ÿ", checked: false },
                { id: 21, text: "è¡Œå‹•é›»æº", checked: false },
                { id: 22, text: "ä¿¡ç”¨å¡", checked: false },
                { id: 23, text: "éŸ“åœ‹äº¤é€šå¡ (T-Money)", checked: false },
                { id: 24, text: "è£œå¦ç”¨å“", checked: false },
                { id: 25, text: "éŸ“å¹£", checked: false },
                { id: 26, text: "å€‹äººè­‰ä»¶ + 2å‹ç…§ç‰‡", checked: false },
                { id: 27, text: "è­·ç…§ã€è­·ç…§å½±æœ¬", checked: false },
            ]
        };

        // æ›´æ–°è¡Œç¨‹è³‡æ–™çµæ§‹ï¼šç§»é™¤ estimate æ¬„ä½
        const initialItinerary = [
            {
                date: "12/18 (Day 1)",
                items: [
                    { id: 101, location: "é‡‘æµ·æ©Ÿå ´ (å‡Œæ™¨é£›æ©Ÿ)" },
                    { id: 102, location: "Marant é£¯åº—" },
                    { id: 103, location: "å¤©ç©ºè† å›Šåˆ—è»Š (å°¾æµ¦ç«™)" },
                    { id: 104, location: "é’æ²™æµ¦åƒçƒ¤è² & é€›é’æ²™æµ¦" },
                    { id: 105, location: "æµ·å²¸åˆ—è»Š (é’æ²™æµ¦å¾€æ¾äº­)" },
                    { id: 106, location: "é‡œå±±æ–œå¡æ»‘è»Š (Skyline Luge)" },
                    { id: 107, location: "é‡œå±±ç´…ç£šæ ¡åœ’ (æ¨‚é«˜)" },
                    { id: 108, location: "æ¨‚å¤©ä¸–ç•Œå†’éšªæ¨‚åœ’" },
                    { id: 109, location: "æµ·å²¸åˆ—è»Š (æ¾äº­å¾€å°¾æµ¦)" }
                ]
            },
            {
                date: "12/19 (Day 2)",
                items: [
                    { id: 201, location: "æ–°ä¸–ç•Œç™¾è²¨ Spa Land (Centum City ç«™)" },
                    { id: 202, location: "Club D Oasis (æµ·é›²å°)" },
                    { id: 203, location: "Yacht Holic" },
                    { id: 204, location: "é‘½çŸ³ç£éŠè‰‡" }
                ]
            },
            {
                date: "12/20 (Day 3)",
                items: [
                    { id: 301, location: "é‡œå±±å¡” (é¾é ­å±±å…¬åœ’)" },
                    { id: 302, location: "ARTE MUSEUM BUSAN" },
                    { id: 303, location: "å—æµ¦æ´é€›è¡—" }
                ]
            },
            {
                date: "12/21 (Day 4)",
                items: [
                    { id: 401, location: "æ•´ç†è¡Œæ Check-out" },
                    { id: 402, location: "æ©Ÿå ´å…ç¨…åº—" },
                    { id: 403, location: "æ­æ©Ÿè¿”å°" }
                ]
            }
        ];

        // --- Components ---

        const ChecklistTab = ({ data, setData }) => {
            const toggleCheck = (category, id) => {
                const newData = { ...data };
                newData[category] = newData[category].map(item => 
                    item.id === id ? { ...item, checked: !item.checked } : item
                );
                setData(newData);
            };

            const calculateProgress = () => {
                let total = 0;
                let checked = 0;
                Object.values(data).forEach(list => {
                    list.forEach(item => {
                        total++;
                        if (item.checked) checked++;
                    });
                });
                return total === 0 ? 0 : Math.round((checked / total) * 100);
            };

            const progress = calculateProgress();

            return (
                <div className="space-y-6 pb-20">
                    {/* Progress Bar */}
                    <div className="bg-white p-4 rounded-3xl shadow-sm border border-morandi-accent">
                        <div className="flex justify-between mb-2 text-sm text-morandi-dark font-bold">
                            <span>æº–å‚™é€²åº¦</span>
                            <span>{progress}%</span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2.5">
                            <div className="bg-morandi-blue h-2.5 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                        </div>
                    </div>

                    {Object.keys(data).map((category) => (
                        <div key={category} className="bg-white rounded-3xl p-5 shadow-sm border border-morandi-accent">
                            <h3 className="text-xl font-bold mb-4 text-morandi-blue flex items-center">
                                <span className="w-2 h-6 bg-morandi-pink rounded-full mr-3"></span>
                                {category}
                            </h3>
                            <div className="space-y-3">
                                {data[category].map((item) => (
                                    <label key={item.id} className="flex items-center space-x-3 cursor-pointer group">
                                        <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${item.checked ? 'bg-morandi-green border-morandi-green' : 'border-gray-300 group-hover:border-morandi-green'}`}>
                                            {item.checked && <span className="text-white"><IconCheck /></span>}
                                        </div>
                                        <input 
                                            type="checkbox" 
                                            className="hidden" 
                                            checked={item.checked} 
                                            onChange={() => toggleCheck(category, item.id)} 
                                        />
                                        <span className={`text-lg transition-all ${item.checked ? 'text-gray-400 line-through' : 'text-morandi-dark'}`}>
                                            {item.text}
                                        </span>
                                    </label>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const ItineraryTab = ({ itinerary, setItinerary }) => {
            const [draggedItem, setDraggedItem] = useState(null);

            // è™•ç†è¡Œç¨‹åœ°é»æ›´æ–°
            const updateLocation = (dayIndex, itemIndex, newLocation) => {
                const newItinerary = [...itinerary];
                // æ³¨æ„ï¼šç¾åœ¨è¡Œç¨‹é …ç›®åªæœ‰ location å±¬æ€§
                newItinerary[dayIndex].items[itemIndex].location = newLocation; 
                setItinerary(newItinerary);
            };

            // æ–°å¢è¡Œç¨‹é …ç›® (ä½¿ç”¨æ™‚é–“æˆ³è¨˜ä½œç‚ºç°¡æ˜“ ID)
            const addItem = (dayIndex) => {
                const newItinerary = [...itinerary];
                newItinerary[dayIndex].items.push({ 
                    id: Date.now(), // ç°¡æ˜“å”¯ä¸€ ID
                    location: "", 
                });
                setItinerary(newItinerary);
            };

            // åˆªé™¤è¡Œç¨‹é …ç›®
            const deleteItem = (dayIndex, itemIndex) => {
                const newItinerary = [...itinerary];
                newItinerary[dayIndex].items.splice(itemIndex, 1);
                setItinerary(newItinerary);
            };

            // ç”¢ç”Ÿ Google åœ°åœ–é€£çµ
            const getMapLink = (query) => {
                if (!query) return "#";
                // åŠ ä¸Š 'é‡œå±±' æé«˜æœå°‹ç²¾ç¢ºåº¦
                return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent("é‡œå±± " + query)}`;
            };

            // --- æ‹–æ›³æ’åºé‚è¼¯ (Drag and Drop) ---

            const handleDragStart = (e, dayIndex, itemIndex) => {
                setDraggedItem({ dayIndex, itemIndex });
                e.dataTransfer.effectAllowed = "move";
            };

            const handleDragEnter = (targetDayIndex, targetItemIndex) => {
                if (!draggedItem) return;

                const { dayIndex: sourceDayIndex, itemIndex: sourceItemIndex } = draggedItem;

                // é™åˆ¶åœ¨åŒä¸€å¤©å…§ç§»å‹•
                if (sourceDayIndex !== targetDayIndex || sourceItemIndex === targetItemIndex) {
                    return;
                }

                const newItinerary = [...itinerary];
                const dayItems = newItinerary[sourceDayIndex].items;

                // 1. ç§»é™¤è¢«æ‹–æ›³çš„é …ç›®
                const [movedItem] = dayItems.splice(sourceItemIndex, 1);
                
                // 2. æ’å…¥åˆ°æ–°çš„ç›®æ¨™ä½ç½®
                dayItems.splice(targetItemIndex, 0, movedItem);

                // æ›´æ–°è¢«æ‹–æ›³é …ç›®çš„ç´¢å¼• (é€™æ¨£ä¸‹æ¬¡ dragEnter æ‰æœƒåŸºæ–¼æ–°çš„ä½ç½®è¨ˆç®—)
                setDraggedItem({ dayIndex: sourceDayIndex, itemIndex: targetItemIndex });
                
                setItinerary(newItinerary);
            };

            const handleDragOver = (e) => {
                e.preventDefault(); // å…è¨±æ”¾ä¸‹
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setDraggedItem(null); // é‡è¨­ç‹€æ…‹
            };

            const isDragging = (dayIndex, itemIndex) => 
                draggedItem && draggedItem.dayIndex === dayIndex && draggedItem.itemIndex === itemIndex;


            return (
                <div className="space-y-6 pb-20" onDrop={handleDrop} onDragOver={handleDragOver}>
                    {itinerary.map((day, dayIndex) => (
                        <div key={dayIndex} className="bg-white rounded-3xl overflow-hidden shadow-sm border border-morandi-accent">
                            <div className="bg-morandi-pink/30 p-4 border-b border-morandi-pink/50">
                                <h3 className="text-xl font-bold text-morandi-dark">{day.date}</h3>
                            </div>
                            <div className="p-4 space-y-4">
                                {day.items.map((item, itemIndex) => (
                                    <div 
                                        key={item.id} 
                                        draggable
                                        onDragStart={(e) => handleDragStart(e, dayIndex, itemIndex)}
                                        onDragEnter={() => handleDragEnter(dayIndex, itemIndex)}
                                        className={`flex flex-col space-y-2 group transition-opacity ${isDragging(dayIndex, itemIndex) ? 'opacity-30' : 'opacity-100'}`}
                                    >
                                        <div className="flex items-center space-x-2 w-full">
                                            {/* æ‹–æ›³æŠŠæ‰‹ */}
                                            <div className="cursor-move text-gray-400 hover:text-morandi-blue p-2 flex-shrink-0" title="æ‹–æ›³æ’åº">
                                                <IconDrag />
                                            </div>
                                            
                                            {/* åœ°é»è¼¸å…¥ */}
                                            <input 
                                                type="text" 
                                                value={item.location}
                                                placeholder="è¼¸å…¥åœ°é»/è¡Œç¨‹åç¨± (ä¾‹å¦‚ï¼šæµ·æ±é¾å®®å¯º)"
                                                onChange={(e) => updateLocation(dayIndex, itemIndex, e.target.value)}
                                                className="flex-1 bg-transparent border-b border-transparent focus:border-morandi-blue outline-none text-morandi-dark text-lg py-1 transition-colors hover:border-gray-200"
                                            />
                                            
                                            {/* åœ°åœ–é€£çµæŒ‰éˆ• */}
                                            <a 
                                                href={getMapLink(item.location)} 
                                                target="_blank" 
                                                rel="noopener noreferrer"
                                                className={`p-2 rounded-full bg-morandi-base text-morandi-blue hover:bg-morandi-blue hover:text-white transition-colors flex-shrink-0 ${!item.location ? 'opacity-50 pointer-events-none' : ''}`}
                                                title="åœ¨ Google åœ°åœ–é–‹å•Ÿ"
                                            >
                                                <IconMap />
                                            </a>
                                            
                                            {/* åˆªé™¤æŒ‰éˆ• */}
                                            <button 
                                                onClick={() => deleteItem(dayIndex, itemIndex)}
                                                className="p-2 text-gray-300 hover:text-red-400 transition-colors flex-shrink-0 opacity-0 group-hover:opacity-100"
                                                title="åˆªé™¤æ­¤é …ç›®"
                                            >
                                                <IconTrash />
                                            </button>
                                        </div>
                                    </div>
                                ))}
                                <button 
                                    onClick={() => addItem(dayIndex)}
                                    className="w-full py-2 border-2 border-dashed border-morandi-blue/30 text-morandi-blue rounded-xl flex items-center justify-center hover:bg-morandi-blue/5 transition-colors mt-4"
                                >
                                    <IconPlus /> <span className="ml-2">æ–°å¢è¡Œç¨‹</span>
                                </button>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const CalculatorTab = () => {
            // åŒ¯ç‡ç‹€æ…‹ï¼Œé è¨­ç‚º 42
            const [rate, setRate] = useState(42); 
            const [krw, setKrw] = useState("");
            
            // å…¬å¼ï¼šå°å¹£ = éŸ“å¹£ / åŒ¯ç‡ (rate)
            const twd = krw && rate > 0 ? Math.round(parseFloat(krw) / parseFloat(rate)) : 0;

            return (
                <div className="flex flex-col h-full justify-center">
                     <div className="bg-white rounded-3xl p-8 shadow-sm border border-morandi-accent text-center space-y-8">
                        <h2 className="text-2xl font-bold text-morandi-dark mb-4">å•†å“è¨ˆç®—æ©Ÿ</h2>
                        
                        {/* åŒ¯ç‡è¨­å®š (å¯ç·¨è¼¯) */}
                        <div className="flex items-center justify-center space-x-4 bg-morandi-base p-4 rounded-2xl border border-morandi-brown/50">
                            <label className="text-sm font-bold text-morandi-dark/70 whitespace-nowrap">åŒ¯ç‡ (é™¤ä»¥)</label>
                            <input 
                                type="number" 
                                step="0.1"
                                value={rate}
                                onChange={(e) => setRate(e.target.value)}
                                placeholder="è¼¸å…¥åŒ¯ç‡"
                                className="w-24 text-center bg-white border border-morandi-blue rounded-lg p-1 text-morandi-dark font-bold focus:outline-none focus:ring-2 focus:ring-morandi-blue/50 transition-shadow"
                            />
                        </div>

                        {/* éŸ“å¹£è¼¸å…¥å€ */}
                        <div className="space-y-2">
                            <label className="block text-morandi-blue font-bold text-lg">éŸ“å¹£é‡‘é¡ (â‚©)</label>
                            <input 
                                type="number" 
                                value={krw}
                                onChange={(e) => setKrw(e.target.value)}
                                placeholder="è¼¸å…¥é‡‘é¡"
                                className="w-full text-center text-4xl font-bold text-morandi-dark bg-transparent border-b-2 border-morandi-pink focus:border-morandi-blue outline-none py-2 placeholder-gray-200"
                            />
                        </div>

                        {/* å°å¹£çµæœå€ */}
                        <div className="space-y-2">
                            <div className="flex items-center justify-center">
                                <span className="text-3xl text-gray-300">â¬‡</span>
                            </div>
                            <label className="block text-morandi-green font-bold text-lg">ç´„å°å¹£ (NT$)</label>
                            <div className="text-5xl font-bold text-morandi-green">
                                ${twd.toLocaleString()}
                            </div>
                        </div>
                        
                        {/* é¡¯ç¤ºç•¶å‰åŒ¯ç‡å…¬å¼ */}
                        <p className="text-xs text-gray-400 mt-4">* å…¬å¼ï¼šéŸ“å¹£ / {rate} = å°å¹£</p>
                    </div>
                    
                    <div className="mt-8 text-center opacity-50">
                        <img src="https://cdn-icons-png.flaticon.com/512/330/330430.png" alt="Calculator" className="w-32 h-32 mx-auto grayscale opacity-50 mix-blend-multiply" />
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary'); // é è¨­æ‰“é–‹è¡Œç¨‹é ç±¤
            const [checklistData, setChecklistData] = useState(initialChecklist);
            const [itineraryData, setItineraryData] = useState(initialItinerary);

            // Simple persistence (using localStorage for this simple example)
            useEffect(() => {
                const savedChecklist = localStorage.getItem('busan_checklist');
                if (savedChecklist) setChecklistData(JSON.parse(savedChecklist));
                
                const savedItinerary = localStorage.getItem('busan_itinerary');
                if (savedItinerary) setItineraryData(JSON.parse(savedItinerary));
            }, []);

            useEffect(() => {
                localStorage.setItem('busan_checklist', JSON.stringify(checklistData));
            }, [checklistData]);

            useEffect(() => {
                localStorage.setItem('busan_itinerary', JSON.stringify(itineraryData));
            }, [itineraryData]);

            return (
                <div className="max-w-md mx-auto h-screen flex flex-col bg-morandi-base shadow-2xl overflow-hidden relative">
                    
                    {/* Header */}
                    <header className="bg-white p-6 pt-8 pb-4 rounded-b-[2.5rem] shadow-sm z-10 flex items-center justify-between">
                        <div>
                            <h1 className="text-2xl font-bold text-morandi-dark flex items-center">
                                <span className="mr-2">ğŸ‡°ğŸ‡·</span> é‡œå±± Busan
                            </h1>
                            <p className="text-morandi-blue text-sm mt-1 font-medium">12/18 - 12/21 (4å¤©3å¤œ)</p>
                        </div>
                        <div className="w-12 h-12 bg-morandi-pink/20 rounded-full flex items-center justify-center text-morandi-pink">
                            <IconPlane />
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="flex-1 overflow-y-auto p-5 scroll-smooth">
                        {activeTab === 'checklist' && <ChecklistTab data={checklistData} setData={setChecklistData} />}
                        {activeTab === 'itinerary' && <ItineraryTab itinerary={itineraryData} setItinerary={setItineraryData} />}
                        {activeTab === 'calculator' && <CalculatorTab />}
                    </main>

                    {/* Navigation Bar */}
                    <nav className="bg-white border-t border-gray-100 pb-safe pt-2 px-6 shadow-[0_-5px_15px_rgba(0,0,0,0.02)] z-20">
                        <div className="flex justify-between items-center h-16">
                            <button 
                                onClick={() => setActiveTab('checklist')}
                                className={`flex flex-col items-center justify-center w-1/3 transition-all ${activeTab === 'checklist' ? 'text-morandi-blue scale-110' : 'text-gray-300'}`}
                            >
                                <div className="mb-1"><IconCheck /></div>
                                <span className="text-xs font-bold">è¡Œå‰æº–å‚™</span>
                            </button>
                            
                            <button 
                                onClick={() => setActiveTab('itinerary')}
                                className={`flex flex-col items-center justify-center w-1/3 transition-all ${activeTab === 'itinerary' ? 'text-morandi-blue scale-110' : 'text-gray-300'}`}
                            >
                                <div className="mb-1"><IconMap /></div>
                                <span className="text-xs font-bold">è¡Œç¨‹å®‰æ’</span>
                            </button>
                            
                            <button 
                                onClick={() => setActiveTab('calculator')}
                                className={`flex flex-col items-center justify-center w-1/3 transition-all ${activeTab === 'calculator' ? 'text-morandi-blue scale-110' : 'text-gray-300'}`}
                            >
                                <div className="mb-1 text-lg font-serif">â‚©</div>
                                <span className="text-xs font-bold">è²»ç”¨è¨ˆç®—</span>
                            </button>
                        </div>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <style>
        /* iOS Safe Area fix */
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom, 20px);
        }
    </style>
</body>
</html>